function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var l,c,u=(function(e,t){!function(e){var t=function(){},n={},r=[],o=[];function s(e,s){var i=o,a=void 0,l=void 0,c=void 0,u=void 0;for(u=arguments.length;u-- >2;)r.push(arguments[u]);for(s&&null!=s.children&&(r.length||r.push(s.children),delete s.children);r.length;)if((l=r.pop())&&void 0!==l.pop)for(u=l.length;u--;)r.push(l[u]);else"boolean"==typeof l&&(l=null),(c="function"!=typeof e)&&(null==l?l="":"number"==typeof l?l=String(l):"string"!=typeof l&&(c=!1)),c&&a?i[i.length-1]+=l:i===o?i=[l]:i.push(l),a=c;var h=new t;return h.nodeName=e,h.children=i,h.attributes=null==s?void 0:s,h.key=null==s?void 0:s.key,void 0!==n.vnode&&n.vnode(h),h}function i(e,t){for(var n in t)e[n]=t[n];return e}function a(e,t){e&&("function"==typeof e?e(t):e.current=t)}var l="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function c(e,t){return s(e.nodeName,i(i({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}var u=0,h=1,d=2,p=3,f="__preactattr_",v=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,m=[];function g(e){!e._dirty&&(e._dirty=!0)&&1==m.push(e)&&(n.debounceRendering||l)(y)}function y(){for(var e=void 0;e=m.pop();)e._dirty&&W(e)}function _(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&w(e,t.nodeName):n||e._componentConstructor===t.nodeName}function w(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function b(e){var t=i({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function C(e){var t=e.parentNode;t&&t.removeChild(e)}function S(e,t,n,r,o){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)a(n,null),a(r,e);else if("class"!==t||o)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var s in n)s in r||(e.style[s]="");for(var i in r)e.style[i]="number"==typeof r[i]&&!1===v.test(i)?r[i]+"px":r[i]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var l=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,x,l):e.removeEventListener(t,x,l),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!o&&t in e){try{e[t]=null==r?"":r}catch(e){}null!=r&&!1!==r||"spellcheck"==t||e.removeAttribute(t)}else{var c=o&&t!==(t=t.replace(/^xlink:?/,""));null==r||!1===r?c?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(c?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function x(e){return this._listeners[e.type](n.event&&n.event(e)||e)}var N=[],k=0,P=!1,O=!1;function R(){for(var e=void 0;e=N.shift();)n.afterMount&&n.afterMount(e),e.componentDidMount&&e.componentDidMount()}function L(e,t,n,r,o,s){k++||(P=null!=o&&void 0!==o.ownerSVGElement,O=null!=e&&!(f in e));var i=T(e,t,n,r,s);return o&&i.parentNode!==o&&o.appendChild(i),--k||(O=!1,s||R()),i}function T(e,t,n,r,o){var s=e,i=P;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||o)?e.nodeValue!=t&&(e.nodeValue=t):(s=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(s,e),E(e,!0))),s[f]=!0,s;var a,l,c=t.nodeName;if("function"==typeof c)return function(e,t,n,r){for(var o=e&&e._component,s=o,i=e,a=o&&e._componentConstructor===t.nodeName,l=a,c=b(t);o&&!l&&(o=o._parentComponent);)l=o.constructor===t.nodeName;return o&&l&&(!r||o._component)?(B(o,c,p,n,r),e=o.base):(s&&!a&&(I(s),e=i=null),o=D(t.nodeName,c,n),e&&!o.nextBase&&(o.nextBase=e,i=null),B(o,c,h,n,r),e=o.base,i&&e!==i&&(i._component=null,E(i,!1))),e}(e,t,n,r);if(P="svg"===c||"foreignObject"!==c&&P,c=String(c),(!e||!w(e,c))&&(a=c,(l=P?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a)).normalizedNodeName=a,s=l,e)){for(;e.firstChild;)s.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(s,e),E(e,!0)}var u=s.firstChild,d=s[f],v=t.children;if(null==d){d=s[f]={};for(var m=s.attributes,g=m.length;g--;)d[m[g].name]=m[g].value}return!O&&v&&1===v.length&&"string"==typeof v[0]&&null!=u&&void 0!==u.splitText&&null==u.nextSibling?u.nodeValue!=v[0]&&(u.nodeValue=v[0]):(v&&v.length||null!=u)&&function(e,t,n,r,o){var s=e.childNodes,i=[],a={},l=0,c=0,u=s.length,h=0,d=t?t.length:0,p=void 0,v=void 0,m=void 0,g=void 0,y=void 0;if(0!==u)for(var w=0;w<u;w++){var b=s[w],S=b[f],x=d&&S?b._component?b._component.__key:S.key:null;null!=x?(l++,a[x]=b):(S||(void 0!==b.splitText?!o||b.nodeValue.trim():o))&&(i[h++]=b)}if(0!==d)for(var N=0;N<d;N++){g=t[N],y=null;var k=g.key;if(null!=k)l&&void 0!==a[k]&&(y=a[k],a[k]=void 0,l--);else if(c<h)for(p=c;p<h;p++)if(void 0!==i[p]&&_(v=i[p],g,o)){y=v,i[p]=void 0,p===h-1&&h--,p===c&&c++;break}y=T(y,g,n,r),m=s[N],y&&y!==e&&y!==m&&(null==m?e.appendChild(y):y===m.nextSibling?C(m):e.insertBefore(y,m))}if(l)for(var P in a)void 0!==a[P]&&E(a[P],!1);for(;c<=h;)void 0!==(y=i[h--])&&E(y,!1)}(s,v,n,r,O||null!=d.dangerouslySetInnerHTML),function(e,t,n){var r=void 0;for(r in n)t&&null!=t[r]||null==n[r]||S(e,r,n[r],n[r]=void 0,P);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||S(e,r,n[r],n[r]=t[r],P)}(s,t.attributes,d),P=i,s}function E(e,t){var n=e._component;n?I(n):(null!=e[f]&&a(e[f].ref,null),!1!==t&&null!=e[f]||C(e),j(e))}function j(e){for(e=e.lastChild;e;){var t=e.previousSibling;E(e,!0),e=t}}var U=[];function D(e,t,n){var r=void 0,o=U.length;for(e.prototype&&e.prototype.render?(r=new e(t,n),H.call(r,t,n)):((r=new H(t,n)).constructor=e,r.render=M);o--;)if(U[o].constructor===e)return r.nextBase=U[o].nextBase,U.splice(o,1),r;return r}function M(e,t,n){return this.constructor(e,n)}function B(e,t,r,o,s){e._disable||(e._disable=!0,e.__ref=t.ref,e.__key=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||s?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,o)),o&&o!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=o),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,r!==u&&(r!==h&&!1===n.syncComponentUpdates&&e.base?g(e):W(e,h,s)),a(e.__ref,e))}function W(e,t,r,o){if(!e._disable){var s=e.props,a=e.state,l=e.context,c=e.prevProps||s,p=e.prevState||a,f=e.prevContext||l,v=e.base,m=e.nextBase,g=v||m,y=e._component,_=!1,w=f,C=void 0,S=void 0,x=void 0;if(e.constructor.getDerivedStateFromProps&&(a=i(i({},a),e.constructor.getDerivedStateFromProps(s,a)),e.state=a),v&&(e.props=c,e.state=p,e.context=f,t!==d&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(s,a,l)?_=!0:e.componentWillUpdate&&e.componentWillUpdate(s,a,l),e.props=s,e.state=a,e.context=l),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!_){C=e.render(s,a,l),e.getChildContext&&(l=i(i({},l),e.getChildContext())),v&&e.getSnapshotBeforeUpdate&&(w=e.getSnapshotBeforeUpdate(c,p));var P=C&&C.nodeName,O=void 0,T=void 0;if("function"==typeof P){var j=b(C);(S=y)&&S.constructor===P&&j.key==S.__key?B(S,j,h,l,!1):(O=S,e._component=S=D(P,j,l),S.nextBase=S.nextBase||m,S._parentComponent=e,B(S,j,u,l,!1),W(S,h,r,!0)),T=S.base}else x=g,(O=y)&&(x=e._component=null),(g||t===h)&&(x&&(x._component=null),T=L(x,C,l,r||!v,g&&g.parentNode,!0));if(g&&T!==g&&S!==y){var U=g.parentNode;U&&T!==U&&(U.replaceChild(T,g),O||(g._component=null,E(g,!1)))}if(O&&I(O),e.base=T,T&&!o){for(var M=e,H=e;H=H._parentComponent;)(M=H).base=T;T._component=M,T._componentConstructor=M.constructor}}for(!v||r?N.push(e):_||(e.componentDidUpdate&&e.componentDidUpdate(c,p,w),n.afterUpdate&&n.afterUpdate(e));e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);k||o||R()}}function I(e){n.beforeUnmount&&n.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var r=e._component;r?I(r):t&&(null!=t[f]&&a(t[f].ref,null),e.nextBase=t,C(t),U.push(e),j(t)),a(e.__ref,null)}function H(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{},this._renderCallbacks=[]}function A(e,t,n){return L(n,e,{},!1,t,!1)}function F(){return{}}i(H.prototype,{setState:function(e,t){this.prevState||(this.prevState=this.state),this.state=i(i({},this.state),"function"==typeof e?e(this.state,this.props):e),t&&this._renderCallbacks.push(t),g(this)},forceUpdate:function(e){e&&this._renderCallbacks.push(e),W(this,d)},render:function(){}});var V={h:s,createElement:s,cloneElement:c,createRef:F,Component:H,render:A,rerender:y,options:n};e.default=V,e.h=s,e.createElement=s,e.cloneElement=c,e.createRef=F,e.Component=H,e.render=A,e.rerender=y,e.options=n,Object.defineProperty(e,"__esModule",{value:!0})}(t)}(l={exports:{}},l.exports),l.exports),h=(c=u)&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c,d=window.searchTranslation,p=d.Link_previous,f=d.Link_next,v=d.Search_common_words_ignored,m=d.Search_no_results,g=d.Search_one_character_or_more,y=d.Search_one_result,_=d.Search_results,w=d.Search_should_be_x_or_more,b=d.Search_too_short,C=p,S=f,x=v,N=m,k=g,P=y,O=_,R=w,L=b;function T(e){var t,n=e.counter,r=e.start,o=e.settings,s=e.onPageSelect,i=Math.ceil(n/o.show),a=r/o.show;t=a<=2?Math.min(i,3):Math.min(i,a+2);for(var l=[],c=function(e){e===a?l.push(h.h("li",{className:"current"},e+1)):l.push(h.h("li",null,h.h("a",{className:"SearchResults__footer__link",onClick:function(){return s(e*o.show)}},e+1)))},u=0;u<t;u++)c(u);return h.h("div",{className:"SearchResults__footer"},h.h("ul",{className:"SearchResults__footer__links Pager"},r>0&&h.h("li",{className:"Pager--prev"},h.h("a",{className:"SearchResults__footer__link",onClick:function(){return s(r-o.show)}},C)),l,a+1!==i&&h.h("li",{className:"Pager--next"},h.h("a",{className:"SearchResults__footer__link",onClick:function(){return s(r+o.show)}},S))))}function E(e){var t,n=e.settings,r=e.item;return r.desc&&(t=r.desc.split(" ").slice(0,n.descriptiveWords).join(" "),r.desc.length<t.length&&"."!==t.charAt(t.length-1)&&(t+=" ...")),h.h("div",{className:"SearchResult"},h.h("div",{className:"SearchResults__title"},h.h("a",{href:n.base_url+r.url},r.title)),n.debug&&h.h("div",{className:"SearchResults__debug"},"Score: ",r.score),n.showURL&&h.h("div",{className:"SearchResults__url"},h.h("a",{href:n.base_url+r.url},r.url.toLowerCase().replace(/https?:\/\//g,""))),t.desc&&h.h("div",{className:"SearchResults__text"},t))}var j=["a","about","above","after","again","against","all","am","an","and","any","are","aren't","as","at","be","because","been","before","being","below","between","both","but","by","can't","cannot","could","couldn't","did","didn't","do","does","doesn't","doing","don't","down","during","each","few","for","from","further","had","hadn't","has","hasn't","have","haven't","having","he","he'd","he'll","he's","her","here","here's","hers","herself","him","himself","his","how","how's","i","i'd","i'll","i'm","i've","if","in","into","is","isn't","it","it's","its","itself","let's","me","more","most","mustn't","my","myself","no","nor","not","of","off","on","once","only","or","other","ought","our","ours","ourselves","out","over","own","same","shan't","she","she'd","she'll","she's","should","shouldn't","so","some","such","than","that","that's","the","their","theirs","them","themselves","then","there","there's","these","they","they'd","they'll","they're","they've","this","those","through","to","too","under","until","up","very","was","wasn't","we","we'd","we'll","we're","we've","were","weren't","what","what's","when","when's","where","where's","which","while","who","who's","whom","why","why's","with","won't","would","wouldn't","you","you'd","you'll","you're","you've","your","yours","yourself","yourselves"];function U(e){var t=new RegExp("[?|&]".concat(e,"=([^&;]+?)(&|#|;|$)")).exec(window.location.search);return decodeURIComponent((t&&t[1]||"").replace(/\+/g,"%20"))||null}function D(e,t){var n=0,r=new RegExp(e,"gi");return-1!==t.title.search(r)&&(n+=20*t.title.match(r).length),-1!==t.text.search(r)&&(n+=20*t.text.match(r).length),-1!==t.tags.search(r)&&(n+=10*t.tags.match(r).length),-1!==t.url.search(r)&&(n+=20),n}function M(e,t){for(var n=0,r=0;r<e.length;r++)if(e[r].match("^-")){var o=new RegExp(e[r].substring(1),"i");-1===t.title.search(o)&&-1===t.text.search(o)&&-1===t.tags.search(o)||(n=0)}else n+=D(e[r],t);return n}function B(e,t,n){return{score:e,title:t.title,desc:n,url:t.url}}var W=function(t){function r(t){var n;return e(this,r),(n=a(this,s(r).call(this,t))).handleClose=function(){n.props.onClose()},n.scrollTop=function(){n.resultRef&&(n.resultRef.scrollTop=0)},n.handlePaginate=function(e){n.setState({start:e},n.scrollTop)},n.handleChange=function(e){n.setState({search:e.target.value,start:0},n.scrollTop),n.props.settings.field.value=e.target.value},n.state={search:n.props.settings.field.value||"",start:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,h.Component),n(r,[{key:"getResults",value:function(){var e=this.props,t=e.settings,n=e.searchIndex,r=this.state.start,o=function(e){var t,n=!0,r=!1;if((e.match('^"')&&e.match('"$')||e.match("^'")&&e.match("'$"))&&(n=!1),n){var o=e.split(" ");r=e!==(t=o.filter((function(e){return-1===j.indexOf(e)})).join(" "))}else t=t.substring(1,t.length-1);return{hasStopWords:r,isStandard:n,searchFor:t}}(this.state.search.toLowerCase().trim()),s=[],i=0,a=[];if(o.searchFor.length<t.minimumLength)return o.hasStopWords?s.push("".concat(N,". ").concat(x)):(s.push(L),s.push(1===t.minimumLength?k:R.replace("!min",t.minimumLength))),{warnings:s,counter:i,results:a,start:r};var l=function(e,t,n){var r=[],o=e.pages;window.searchLanguage&&(o=o.filter((function(e){return 0===e.url.indexOf("".concat(window.searchLanguage,"/"))})));for(var s=t.split(" "),i=0;i<o.length;i++){var a=n?M(s,o[i]):D(t,o[i]);0!==a&&r.push(B(a,o[i],o[i].text))}return r.sort((function(e,t){return t.score-e.score})),r}(n,o.searchFor,o.isStandard);return 0===(i=l.length)?(s.push(N),{warnings:s,counter:i,results:a,start:r}):(t.showTitleCount&&this.props.onTitleChange("(".concat(i,")")),{warnings:s,counter:i,results:a=l.filter((function(e,n){return n>=r&&n<t.show+r})),start:r})}},{key:"render",value:function(){var e=this,t=this.props.settings,n=this.getResults(),r=n.warnings,o=n.counter,s=n.results,i=n.start;return h.h("div",null,h.h("div",{className:"SearchResultsBackdrop"}),h.h("div",{className:"SearchResults",ref:function(t){return e.resultRef=t}},h.h("input",{className:"Search__field",placeholder:"Search...",autoComplete:"on",autoSave:"text_search",type:"search",value:this.state.search,onInput:this.handleChange}),h.h("button",{className:"SearchResults__close",onClick:this.handleClose},"×"),h.h("div",{className:"SearchResults__count"},1===o?P:O.replace("!count",o)),r.map((function(e){return h.h("div",{key:e,className:"SearchResults__warning"},e)})),s.map((function(e){return h.h(E,{key:e.title,item:e,settings:t})})),o>t.show&&h.h(T,{counter:o,start:i,settings:t,onPageSelect:this.handlePaginate})))}}]),r}(),I=document.title,H=function(){function t(n){var s=this;e(this,t),this.keyUpHandler=function(e){27===e.which&&s.handleClose()},this.handleClose=function(){document.title=I,document.removeEventListener("keyup",s.keyUpHandler),document.body.classList.remove("with-search"),h.render("",s.resultContainer,s.renderedElement),s.resultContainer=null,s.renderedElement=null},this.settings=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(n,!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({field:document.getElementById("search_input"),show:10,showURL:!0,showTitleCount:!0,minimumLength:3,descriptiveWords:25,highlightTerms:!0,highlightEveryTerm:!1,contentLocation:"search/search_index.json",debug:!1},n),this.searchIndex={pages:[]}}return n(t,[{key:"loadData",value:function(){var e=this;return this.loadingPromise||(this.loadingPromise=fetch(this.settings.base_url+this.settings.contentLocation).then((function(e){return e.json()})).then((function(t){e.searchIndex=t}))),this.loadingPromise}},{key:"run",value:function(){var e=this;U("q")&&(this.settings.field.value=U("q"),this.loadData().then((function(){e.displaySearch()}))),this.settings.field.addEventListener("keyup",(function(t){e.loadData(),13===parseInt(t.keyCode,10)&&e.loadData().then((function(){e.displaySearch()}))}))}},{key:"displaySearch",value:function(){this.resultContainer||(this.resultContainer=document.createElement("div"),document.body.appendChild(this.resultContainer)),document.addEventListener("keyup",this.keyUpHandler),this.renderedElement=h.render(h.h(W,{searchIndex:this.searchIndex,onClose:this.handleClose,onTitleChange:function(e){document.title="".concat(e," ").concat(I)},settings:this.settings}),this.resultContainer),document.body.classList.add("with-search"),document.body.scrollTop=0}}]),t}();window.search=function(e){new H(e).run()};
//# sourceMappingURL=search.min.js.map
